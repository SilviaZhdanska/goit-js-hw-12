{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '44780398-b9dbe1b89370a8f5261d05d93';\nconst baseUrl = 'https://pixabay.com/api/';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nexport async function fetchImages(query) {\n  try {\n    if (query !== currentQuery) {\n      currentPage = 1;\n      currentQuery = query;\n    }\n\n    const response = await axios.get(baseUrl, {\n      params: {\n        key: apiKey,\n        q: query,\n        page: currentPage,\n        per_page: 15,\n      },\n    });\n\n    currentPage += 1;\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst cardContainer = document.querySelector('.card-container');\nconst loadMoreButton = document.querySelector('.load-more-button');\n\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      image => `\n      <div class=\"card\">\n        <div class=\"card-img-top\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          </a>\n        </div>\n        <div class=\"card-body\">\n          <h2 class=\"card-title visually-hidden\">${image.tags}</h2>\n          <p class=\"card-text\">Likes: ${image.likes}</p>\n          <p class=\"card-text\">Views: ${image.views}</p>\n          <p class=\"card-text\">Comments: ${image.comments}</p>\n          <p class=\"card-text\">Downloads: ${image.downloads}</p>\n        </div>\n      </div>\n    `\n    )\n    .join('');\n\n  cardContainer.innerHTML += markup;\n\n  const lightbox = new SimpleLightbox('.card-img-top a', {\n    captions: true,\n    captionsData: 'alt',\n  });\n\n  lightbox.refresh();\n\n  showLoadMoreButton();\n}\n\nexport function showNoResultsMessage() {\n  iziToast.info({\n    backgroundColor: 'red',\n    position: 'topRight',\n    title: 'Info',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n\n  hideLoadMoreButton();\n}\n\nexport function showFetchErrorMessage() {\n  console.error('Error fetching images');\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there was an error fetching images. Please try again later.',\n  });\n\n  hideLoadMoreButton();\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreButton.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.style.display = 'block';\n}\n\nexport function showEndOfResultsMessage() {\n  iziToast.info({\n    backgroundColor: 'green',\n    position: 'topRight',\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n\n  hideLoadMoreButton();\n}\n","import axios from 'axios';\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  showNoResultsMessage,\n  showFetchErrorMessage,\n  hideLoadMoreButton,\n  showEndOfResultsMessage,\n  showLoadMoreButton,\n} from './js/render-functions.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const searchForm = document.querySelector('.search-form');\n  const loadMoreButton = document.querySelector('.load-more-button');\n  const loader = document.querySelector('.loader');\n  const cardContainer = document.querySelector('.card-container');\n\n  loader.style.display = 'none';\n  loadMoreButton.style.display = 'none';\n\n  let currentPage = 1;\n  let currentQuery = '';\n  let form;\n\n  searchForm.addEventListener('submit', handleSearch);\n\n  async function handleSearch(event) {\n    event.preventDefault();\n\n    form = event.currentTarget;\n    const queryValue = form.elements.query.value.trim().toLowerCase();\n\n    if (!queryValue) {\n      return;\n    }\n\n    loader.style.display = 'inline-block';\n    cardContainer.innerHTML = '';\n\n    try {\n      const data = await fetchImages(queryValue);\n      loader.style.display = 'none';\n\n      if (data.hits.length === 0) {\n        showNoResultsMessage();\n        hideLoadMoreButton();\n      } else {\n        renderGallery(data.hits);\n        showLoadMoreButton();\n        currentPage = 1;\n        currentQuery = queryValue;\n        smoothScrollToNextGroup();\n      }\n    } catch (error) {\n      loader.style.display = 'none';\n      showFetchErrorMessage();\n    } finally {\n      form.reset();\n    }\n  }\n\n  loadMoreButton.addEventListener('click', async () => {\n    loader.style.display = 'inline-block';\n\n    try {\n      const data = await fetchImages(currentQuery);\n      loader.style.display = 'none';\n\n      if (data.hits.length === 0) {\n        showEndOfResultsMessage();\n        hideLoadMoreButton();\n      } else {\n        renderGallery(data.hits);\n        currentPage += 1;\n        smoothScrollToNextGroup();\n      }\n    } catch (error) {\n      loader.style.display = 'none';\n      showFetchErrorMessage();\n    } finally {\n      form.reset();\n    }\n  });\n\n  function smoothScrollToNextGroup() {\n    const cardHeight = cardContainer\n      .querySelector('.card')\n      .getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n});\n"],"names":["apiKey","baseUrl","currentPage","currentQuery","fetchImages","query","response","axios","error","cardContainer","loadMoreButton","renderGallery","images","markup","image","SimpleLightbox","showLoadMoreButton","showNoResultsMessage","iziToast","hideLoadMoreButton","showFetchErrorMessage","showEndOfResultsMessage","searchForm","loader","form","handleSearch","event","queryValue","data","smoothScrollToNextGroup","cardHeight"],"mappings":"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"}