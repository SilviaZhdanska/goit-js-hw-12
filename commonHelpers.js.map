{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '44780398-b9dbe1b89370a8f5261d05d93';\nconst baseUrl = 'https://pixabay.com/api/';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nexport async function fetchImages(query) {\n  try {\n    if (query !== currentQuery) {\n      currentPage = 1;\n      currentQuery = query;\n    }\n\n    const response = await axios.get(baseUrl, {\n      params: {\n        key: apiKey,\n        q: query,\n        page: currentPage,\n        per_page: 15,\n      },\n    });\n\n    currentPage += 1;\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst cardContainer = document.querySelector('.card-container');\nconst loadMoreButton = document.querySelector('.load-more-button');\n\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      image => `\n      <div class=\"card\">\n        <div class=\"card-img-top\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          </a>\n        </div>\n        <div class=\"card-body\">\n          <h2 class=\"card-title visually-hidden\">${image.tags}</h2>\n          <p class=\"card-text\">Likes: ${image.likes}</p>\n          <p class=\"card-text\">Views: ${image.views}</p>\n          <p class=\"card-text\">Comments: ${image.comments}</p>\n          <p class=\"card-text\">Downloads: ${image.downloads}</p>\n        </div>\n      </div>\n    `\n    )\n    .join('');\n\n  cardContainer.innerHTML += markup;\n\n  const lightbox = new SimpleLightbox('.card-img-top a', {\n    captions: true,\n    captionsData: 'alt',\n  });\n\n  lightbox.refresh();\n\n  showLoadMoreButton();\n}\n\nexport function showNoResultsMessage() {\n  iziToast.info({\n    backgroundColor: 'red',\n    position: 'topRight',\n    title: 'Info',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n\n  hideLoadMoreButton();\n}\n\nexport function showFetchErrorMessage() {\n  console.error('Error fetching images');\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there was an error fetching images. Please try again later.',\n  });\n\n  hideLoadMoreButton();\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreButton.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.style.display = 'block';\n}\n\nexport function showEndOfResultsMessage() {\n  iziToast.info({\n    backgroundColor: 'green',\n    position: 'topRight',\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n\n  hideLoadMoreButton();\n}\n\nexport function scrollToLoadMore() {\n  loadMoreButton.scrollIntoView({ behavior: 'smooth' });\n}\n","import axios from 'axios';\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  showNoResultsMessage,\n  showFetchErrorMessage,\n  hideLoadMoreButton,\n  showEndOfResultsMessage,\n  showLoadMoreButton,\n  scrollToLoadMore,\n} from './js/render-functions.js';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreButton = document.querySelector('.load-more-button');\nconst loader = document.querySelector('.loader');\nconst cardContainer = document.querySelector('.card-container');\n\nloader.style.display = 'none';\nloadMoreButton.style.display = 'none';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', handleSearch);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const queryValue = form.elements.query.value.trim().toLowerCase();\n\n  if (!queryValue) {\n    return;\n  }\n\n  loader.style.display = 'inline-block';\n  cardContainer.innerHTML = '';\n\n  try {\n    const data = await fetchImages(queryValue);\n    loader.style.display = 'none';\n\n    if (data.hits.length === 0) {\n      showNoResultsMessage();\n      hideLoadMoreButton();\n    } else {\n      renderGallery(data.hits);\n      showLoadMoreButton();\n      scrollToLoadMore();\n      currentPage = 1;\n      currentQuery = queryValue;\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    showFetchErrorMessage();\n  } finally {\n    form.reset();\n  }\n}\n\nloadMoreButton.addEventListener('click', async () => {\n  loader.style.display = 'inline-block';\n\n  try {\n    const data = await fetchImages(currentQuery);\n    loader.style.display = 'none';\n\n    if (data.hits.length === 0) {\n      showEndOfResultsMessage();\n      hideLoadMoreButton();\n    } else {\n      renderGallery(data.hits);\n      scrollToLoadMore();\n      currentPage++;\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    showFetchErrorMessage();\n  }\n});\n"],"names":["apiKey","baseUrl","currentPage","currentQuery","fetchImages","query","response","axios","error","cardContainer","loadMoreButton","renderGallery","images","markup","image","SimpleLightbox","showLoadMoreButton","showNoResultsMessage","iziToast","hideLoadMoreButton","showFetchErrorMessage","showEndOfResultsMessage","scrollToLoadMore","searchForm","loader","handleSearch","event","form","queryValue","data"],"mappings":"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"}